---
import { fetchFeatures } from '../api/webstatus'
import { AppHeader } from '../components/app-header'
import Dashboard from '../components/astro/Dashboard.astro'
import { WEB_FEATURES } from '../constants/web-features'
import Layout from '../layouts/Layout.astro'

// Build-time data fetching
// This runs at BUILD TIME and pre-renders the page with real data
const features = await fetchFeatures([...WEB_FEATURES])
const buildTimestamp = new Date().toISOString()
---

<Layout features={features} buildTimestamp={buildTimestamp}>
  <AppHeader />

  <Dashboard features={features} suggestedFeatureIds={WEB_FEATURES} />
</Layout>
